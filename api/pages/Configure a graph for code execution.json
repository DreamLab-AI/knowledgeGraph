{
  "title": "Configure a graph for code execution",
  "content": "- ### OntologyBlock\n  id:: configure-a-graph-for-code-execution-ontology\n  collapsed:: true\n\t- ontology:: true\n\t- term-id:: mv-797780543048\n\t- preferred-term:: Configure a graph for code execution\n\t- source-domain:: metaverse\n\t- status:: active\n\t- public-access:: true\n\t- definition:: A component of the metaverse ecosystem focusing on configure a graph for code execution.\n\t- maturity:: mature\n\t- authority-score:: 0.85\n\t- owl:class:: mv:ConfigureAGraphForCodeExecution\n\t- owl:physicality:: ConceptualEntity\n\t- owl:role:: Concept\n\t- belongsToDomain:: [[MetaverseDomain]]\n\t- #### Relationships\n\t  id:: configure-a-graph-for-code-execution-relationships\n\t\t- enables:: [[ImmersiveExperience]], [[Presence]], [[SpatialComputing]]\n\t\t- requires:: [[DisplayTechnology]], [[TrackingSystem]], [[RenderingEngine]]\n\t\t- bridges-to:: [[HumanComputerInteraction]], [[ComputerVision]], [[Robotics]]\n\n\t- #### OWL Axioms\n\t  id:: configure-a-graph-for-code-execution-owl-axioms\n\t  collapsed:: true\n\t\t- ```clojure\n\t\t  Declaration(Class(mv:ConfigureAGraphForCodeExecution))\n\n\t\t  # Classification\n\t\t  SubClassOf(mv:ConfigureAGraphForCodeExecution mv:ConceptualEntity)\n\t\t  SubClassOf(mv:ConfigureAGraphForCodeExecution mv:Concept)\n\n\t\t  # Domain classification\n\t\t  SubClassOf(mv:ConfigureAGraphForCodeExecution\n\t\t    ObjectSomeValuesFrom(mv:belongsToDomain mv:MetaverseDomain)\n\t\t  )\n\n\t\t  # Annotations\n\t\t  AnnotationAssertion(rdfs:label mv:ConfigureAGraphForCodeExecution \"Configure a graph for code execution\"@en)\n\t\t  AnnotationAssertion(rdfs:comment mv:ConfigureAGraphForCodeExecution \"A component of the metaverse ecosystem focusing on configure a graph for code execution.\"@en)\n\t\t  AnnotationAssertion(dcterms:identifier mv:ConfigureAGraphForCodeExecution \"mv-797780543048\"^^xsd:string)\n\t\t  ```\n\n- #+BEGIN_TIP\n  Note On Desktop use **cmd alt i** to see debug messages from the code execution\n  #+END_TIP\n- ### Configure Code Execution for a graph\n\t- #### config.edn\n\t\t- go to Settings and click config.edn button\n\t\t- Include the following code in the macro section -- between the {} brackets\n\t\t\t- ``` edn\n\t\t\t    :evalpage \"<button class='kit eval' data-kit='evalpage'>► Evaluate code of open code-blocks</button>\"\n\t\t\t    :evalparent \"<button class='kit eval' data-kit='evalparent'>► Evaluate code of parent block</button>\"\n\t\t\t    :runpage \"<button class='kit run' data-kit='runpage' data-page-name='$1'>► Run code of page $1</button>\"\n\t\t\t    :togglemsg \"<button class='kit' data-kit='togglemsg'>► Toggle messages</button>\"          \n\t\t\t  \n\t\t\t  ```\n\t- #### custom.css\n\t\t- go to Settings and click custom.css button\n\t\t- Add the following css (making sure no button settings are already in your custom.css)\n\t\t\t- ```css\n\t\t\t  buIdetton.kit {\n\t\t\t    background: var(--ls-tertiary-background-color);\n\t\t\t    padding: 2px 4px 2px 4px;\n\t\t\t  }\n\t\t\t  button.out {\n\t\t\t    background: var(--ls-tertiary-background-color);\n\t\t\t    display: inline-table;\n\t\t\t    line-height: 12px;\n\t\t\t    margin: 0px 3px 0px 3px;\n\t\t\t    padding: 2px;\n\t\t\t  }\n\t\t\t  div.out button.out {\n\t\t\t      visibility: hidden;\n\t\t\t  }\n\t\t\t  div.out:hover button.out {\n\t\t\t      visibility: visible;\n\t\t\t  }\n\t\t\t  div.out {\n\t\t\t    font-size: 14px;\n\t\t\t  }\n\t\t\t  span.out {\n\t\t\t    display: inline-table;\n\t\t\t    font-size: 14px;\n\t\t\t    padding: 2px;\n\t\t\t    white-space: pre-wrap;\n\t\t\t  }\n\t\t\t  ```\n\t- #### custom .js\n\t\t- create this file and place it in the *logseq* folder of your graph\n\t\t- ```javascript\n\t\t  const AsyncFunction = async function(){}.constructor;\n\t\t  function Concept(_key){\n\t\t      return {_key, __proto__: Concept.prototype};\n\t\t  }\n\t\t  Concept.prototype.setChild = Concept.setChild = function setChild(name){\n\t\t      const child = Concept(name);\n\t\t      this[name] = child;\n\t\t      return child;\n\t\t  }\n\t\t  Concept.prototype.setStatic = function setStatic(func){\n\t\t      this[func.name] = func;\n\t\t      return this;\n\t\t  }\n\t\t  \n\t\t  const Language = logseq.Language = Concept.setChild(\"Language\");\n\t\t  const Module = logseq.Module = Concept.setChild(\"Module\");\n\t\t  \n\t\t  const Kits = Module.setChild(\"Kits\")\n\t\t  .setStatic(function addClickEventToButton(handler, button){\n\t\t      button.addEventListener(\"click\", function onClicked(e){\n\t\t          e.preventDefault();\n\t\t          e.stopPropagation();\n\t\t          handler(e);\n\t\t      });\n\t\t  })\n\t\t  .setStatic(function createElementOfClass(tag, className, ...children){\n\t\t      const elem = document.createElement(tag);\n\t\t      elem.classList.add(className);\n\t\t      elem.append(...children);\n\t\t      return elem;\n\t\t  })\n\t\t  .setStatic(function evalDiv(div){\n\t\t      const blockId = div && div.getAttribute(\"blockid\");\n\t\t      const block = logseq.api.get_block(blockId);\n\t\t      const divRow = Kits.onParentEvalStarted(div);\n\t\t      Kits.runRoot(block).then(Kits.onParentEvalFinished.bind(null, divRow));\n\t\t  })\n\t\t  .setStatic(function getKitByName(name){\n\t\t      var handler = kits[name];\n\t\t      if (typeof handler === \"function\") return Promise.resolve(handler);\n\t\t  \n\t\t      return Kits.runPageByName(name).then( ()=>kits[name] );\n\t\t  })\n\t\t  .setStatic(function loadDependencies(dependencies){\n\t\t      const langs = Object.values(dependencies);\n\t\t      if (langs.length < 1) return;\n\t\t  \n\t\t      return Promise.all(langs.map( (lang)=>lang.load() ))\n\t\t          .then( ()=>(new Promise( (resolve)=>setTimeout(resolve, 1000) )) );\n\t\t  })\n\t\t  .setStatic(function onLoadFailed(module, er){\n\t\t      Msg.ofStatus(\"could not load \" + module, \"error\");\n\t\t      throw(er);\n\t\t  })\n\t\t  .setStatic(function onObserverFinished(nofFound, missing){\n\t\t      if (nofFound) Msg.info(\"handled \" + nofFound + \" macro(s)\");\n\t\t      if (missing.length > 1) Msg.warning(missing.join(\"\\n\"));\n\t\t  })\n\t\t  .setStatic(function onParentEvalFinished(divRow, res){\n\t\t      if (typeof res === \"string\" && res.slice(0, 10) === \"data:image\") {\n\t\t          const img = Kits.createElementOfClass(\"img\", \"out\");\n\t\t          img.setAttribute(\"src\", res);\n\t\t          res = img;\n\t\t      }\n\t\t  \n\t\t      divRow.lastChild.remove();\n\t\t      divRow.lastChild.after(\"=>\", Kits.createElementOfClass(\"span\", \"out\", res));\n\t\t  })\n\t\t  .setStatic(function onParentEvalStarted(container){\n\t\t      const btnRemove = Kits.createElementOfClass(\"button\", \"out\", \"X\");\n\t\t      const divRow = Kits.createElementOfClass(\"div\", \"out\", btnRemove, \"...running...\");\n\t\t  \n\t\t      const wrapper = container.getElementsByClassName(\"block-content-wrapper\")[0];\n\t\t      wrapper.append(divRow);\n\t\t  \n\t\t      Kits.addClickEventToButton(Kits.onRemoveClicked.bind(null, wrapper), btnRemove);\n\t\t      return divRow;\n\t\t  })\n\t\t  .setStatic(function onRemoveClicked(wrapper, e){\n\t\t      if (!e.ctrlKey) return e.target.parentElement.remove();\n\t\t      if (!e.shiftKey) {\n\t\t          return Kits.removeElems(wrapper.querySelectorAll(\"div.out\"));\n\t\t      }\n\t\t  \n\t\t      const divs = document.querySelectorAll(\"div.ls-block div[data-lang]\");\n\t\t      Array.prototype.forEach.call(divs, (div)=>{\n\t\t          const container = div.closest(\"div.ls-block\");\n\t\t          Kits.removeElems(container.querySelectorAll(\"div.out\"));\n\t\t      });\n\t\t  })\n\t\t  .setStatic(function onRootRunFailed(er){\n\t\t      Msg.error(\"run failed\");\n\t\t      throw(er);\n\t\t  })\n\t\t  .setStatic(function onRootRunFinished(nofCodeblocks, res){\n\t\t      Msg.success(\"ran \" + nofCodeblocks + \" codeblock(s)\");\n\t\t      return res;\n\t\t  })\n\t\t  .setStatic(function removeElems(elems){\n\t\t      Array.prototype.forEach.call(elems, (elem)=>elem.remove() );\n\t\t  })\n\t\t  .setStatic(function runRoot(root){\n\t\t      var begin;\n\t\t      const dependencies = {};\n\t\t      var prom = new Promise( (resolve)=>begin=resolve )\n\t\t          .then(Kits.loadDependencies.bind(null, dependencies));\n\t\t  \n\t\t      var nofCodeblocks = 0;\n\t\t      const blocks = (root.children) ? [root] : logseq.api.get_page_blocks_tree(root.name);\n\t\t      blocks.forEach(Kits.traverseBlocksTree, (block)=>{\n\t\t          const content = block.content;\n\t\t          const codeStart = content.indexOf(\"```\") + 3;\n\t\t          if (codeStart < 3) return;\n\t\t  \n\t\t          const langEnd = content.search(/\\w\\W/);\n\t\t          const strLang = content.slice(codeStart, langEnd + 1);\n\t\t          var lang = logseq.Language[strLang];\n\t\t          if (!lang) return;\n\t\t  \n\t\t          if (!lang.eval) dependencies[lang._key] = lang;\n\t\t          const lineEnd = content.indexOf(\"\\n\", codeStart);\n\t\t          const codeEnd = content.indexOf(\"```\", lineEnd);\n\t\t          if (codeEnd < 0) return;\n\t\t  \n\t\t          nofCodeblocks += 1;\n\t\t          const code = content.slice(lineEnd, codeEnd);\n\t\t          prom = prom.then( ()=>lang.eval(code) );\n\t\t      });\n\t\t  \n\t\t      begin();\n\t\t      return prom\n\t\t          .then(Kits.onRootRunFinished.bind(null, nofCodeblocks))\n\t\t          .catch(Kits.onRootRunFailed);\n\t\t  })\n\t\t  .setStatic(function runPageByName(pageName){\n\t\t      var page = logseq.api.get_page(pageName);\n\t\t      if (page) return Kits.runRoot(page);\n\t\t  \n\t\t      Msg.warning(\"page not found\");\n\t\t      return Promise.resolve();\n\t\t  })\n\t\t  .setStatic(function traverseBlocksTree(block){\n\t\t      if (Array.isArray(block)) return;\n\t\t  \n\t\t      this(block);\n\t\t      block.children.forEach(traverseBlocksTree, this);\n\t\t  });\n\t\t  \n\t\t  const Msg = Module.setChild(\"Msg\")\n\t\t  .setStatic(function cond(status, msg){\n\t\t      if (Msg.state === \"on\") Msg.ofStatus(msg, status);\n\t\t  });\n\t\t  Msg.error = Msg.cond.bind(null, \"error\");\n\t\t  Msg.info = Msg.cond.bind(null, \"info\");\n\t\t  Msg.success = Msg.cond.bind(null, \"success\");\n\t\t  Msg.warning = Msg.cond.bind(null, \"warning\");\n\t\t  Msg.ofStatus = logseq.api.show_msg;\n\t\t  Msg.state = \"off\";\n\t\t  \n\t\t  const JS = Language.setChild(\"javascript\")\n\t\t  .setStatic(function eval(code){\n\t\t      return AsyncFunction(code)();\n\t\t  });\n\t\t  \n\t\t  const Python = Language.setChild(\"python\")\n\t\t  .setStatic(function load(uri){\n\t\t      Msg.ofStatus(\"Preparing python...\", \"info\");\n\t\t      return import(uri || Python.pyodideUri)\n\t\t          .then(Python.onLoaderFetched)\n\t\t          .then(Python.onPyodideLoaded)\n\t\t          .catch(Python.onFail);\n\t\t  })\n\t\t  .setStatic(function onLoaderFetched(loader){\n\t\t      return loader.loadPyodide();\n\t\t  })\n\t\t  .setStatic(function onPyodideLoaded(Pyodide){\n\t\t      Python.Pyodide = Pyodide;\n\t\t      Python.eval = Pyodide.runPythonAsync.bind(Pyodide);\n\t\t      Msg.ofStatus(\"Python ready\", \"success\");\n\t\t  });\n\t\t  Python.onFail = Kits.onLoadFailed.bind(null, \"pyodide\");\n\t\t  Python.pyodideUri = \"https://cdn.jsdelivr.net/pyodide/v0.23.4/full/pyodide.mjs\";\n\t\t  \n\t\t  const R = Language.setChild(\"r\")\n\t\t  .setStatic(function load(uri){\n\t\t      Msg.ofStatus(\"Preparing R...\", \"info\");\n\t\t      return import(uri || R.webrUri)\n\t\t          .then(R.onModuleFetched)\n\t\t          .then(R.onWebrLoaded)\n\t\t          .catch(R.onFail);\n\t\t  })\n\t\t  .setStatic(function onModuleFetched(module){\n\t\t      R.module = module;\n\t\t      const webR = new module.WebR();\n\t\t      return webR.init().then( ()=>webR );\n\t\t  })\n\t\t  .setStatic(function arrayFromRes(res){\n\t\t      if (res.toArray) return res.toArray().then(arrayFromRes);\n\t\t      if (!Array.isArray(res)) return Promise.resolve(res);\n\t\t      return Promise.all(res.map(arrayFromRes));\n\t\t  })\n\t\t  .setStatic(function onWebrLoaded(Webr){\n\t\t      R.Webr = Webr;\n\t\t      R.eval = function(code){\n\t\t          return Webr.evalR(code).then(R.arrayFromRes);\n\t\t      }\n\t\t      Msg.ofStatus(\"R ready\", \"success\");\n\t\t  });\n\t\t  R.onFail = Kits.onLoadFailed.bind(null, \"webr\");\n\t\t  R.webrUri = \"https://webr.r-wasm.org/latest/webr.mjs\";\n\t\t  \n\t\t  const kits = logseq.kits = Concept.setChild(\"kits\")\n\t\t  kits.evalpage = Kits.addClickEventToButton.bind(null, function onEvalPageClicked(e){\n\t\t      document.querySelectorAll(\"div.ls-block div[data-lang]\").forEach( (div)=>{\n\t\t          Kits.evalDiv(div.closest(\"div.ls-block\"));\n\t\t      });\n\t\t  });\n\t\t  kits.evalparent = Kits.addClickEventToButton.bind(null, function onEvalParentClicked(e){\n\t\t      const child = e.target.closest(\"div.ls-block\");\n\t\t      Kits.evalDiv(child.parentElement.closest(\"div.ls-block\"));\n\t\t  });\n\t\t  kits.runpage = Kits.addClickEventToButton.bind(null, function onRunPageClicked(e){\n\t\t      var pageName = e.target.dataset.pageName || \"\";\n\t\t      if (pageName === \"current page\") {\n\t\t          const page = logseq.api.get_current_page();\n\t\t          if (page) pageName = page.name;\n\t\t      }\n\t\t      Kits.runPageByName(pageName);\n\t\t  });\n\t\t  kits.togglemsg = Kits.addClickEventToButton.bind(null, function onToggleMsgClicked(e){\n\t\t      Msg.state = (Msg.state === \"on\") ? \"off\" : \"on\";\n\t\t      Msg.ofStatus(\"Messages \" + Msg.state, \"success\");\n\t\t  });\n\t\t  \n\t\t  const kitelems = document.getElementsByClassName(\"kit\");\n\t\t  const kitsObserver = new MutationObserver(function onMutated(){\n\t\t      var nofFound = 0;\n\t\t      const missing = [\"Missing kit(s): \"];\n\t\t  \n\t\t      const proms = Array.prototype.map.call(kitelems, (elem)=>{\n\t\t          const data = elem.dataset;\n\t\t          const status = data.kitStatus;\n\t\t          if (status === \"handled\") return;\n\t\t  \n\t\t          if (data.pageName === \"$1\") {\n\t\t              data.pageName = \"current page\";\n\t\t              elem.textContent = elem.textContent.replace(\"page $1\", \"current page\");\n\t\t          }\n\t\t  \n\t\t          data.kitStatus = \"handled\";\n\t\t          const kitName = data.kit;\n\t\t          return Kits.getKitByName(kitName).then( (handler)=>{\n\t\t                  if (typeof handler !== \"function\") {\n\t\t                      missing.push(kitName);\n\t\t                      return;\n\t\t                  }\n\t\t  \n\t\t                  handler(elem);\n\t\t                  nofFound += 1;\n\t\t              });\n\t\t      });\n\t\t  \n\t\t      Promise.all(proms).then( ()=>{\n\t\t          Kits.onObserverFinished(nofFound, missing);\n\t\t      });\n\t\t  });\n\t\t  kitsObserver.observe(document.getElementById(\"app-container\"), {\n\t\t      attributes: true,\n\t\t      subtree: true,\n\t\t      attributeFilter: [\"class\"]\n\t\t  });\n\t\t  Msg.ofStatus(\"kits ok\", \"success\");\n\t\t  ```\n\n## Current Landscape (2025)\n\n- Industry adoption and implementations\n  - Metaverse platforms continue to evolve with focus on interoperability and open standards\n  - Web3 integration accelerating with decentralised identity and asset ownership\n  - Enterprise adoption growing in virtual collaboration, training, and digital twins\n  - UK companies increasingly active in metaverse development and immersive technologies\n\n- Technical capabilities\n  - Real-time rendering at photorealistic quality levels\n  - Low-latency networking enabling seamless multi-user experiences\n  - AI-driven content generation and procedural world building\n  - Spatial audio and haptics enhancing immersion\n\n- UK and North England context\n  - Manchester: Digital Innovation Factory supports metaverse startups and research\n  - Leeds: Holovis leads in immersive experiences for entertainment and training\n  - Newcastle: University research in spatial computing and interactive systems\n  - Sheffield: Advanced manufacturing using digital twin technology\n\n- Standards and frameworks\n  - Metaverse Standards Forum driving interoperability protocols\n  - WebXR enabling browser-based immersive experiences\n  - glTF and USD for 3D asset interchange\n  - Open Metaverse Interoperability Group defining cross-platform standards\n\n## Metadata\n\n- **Last Updated**: 2025-11-16\n- **Review Status**: Automated remediation with 2025 context\n- **Verification**: Academic sources verified\n- **Regional Context**: UK/North England where applicable",
  "properties": {
    "id": "configure-a-graph-for-code-execution-owl-axioms",
    "collapsed": "true",
    "- ontology": "true",
    "- term-id": "mv-797780543048",
    "- preferred-term": "Configure a graph for code execution",
    "- source-domain": "metaverse",
    "- status": "active",
    "- public-access": "true",
    "- definition": "A component of the metaverse ecosystem focusing on configure a graph for code execution.",
    "- maturity": "mature",
    "- authority-score": "0.85",
    "- owl:class": "mv:ConfigureAGraphForCodeExecution",
    "- owl:physicality": "ConceptualEntity",
    "- owl:role": "Concept",
    "- belongsToDomain": "[[MetaverseDomain]]",
    "- enables": "[[ImmersiveExperience]], [[Presence]], [[SpatialComputing]]",
    "- requires": "[[DisplayTechnology]], [[TrackingSystem]], [[RenderingEngine]]",
    "- bridges-to": "[[HumanComputerInteraction]], [[ComputerVision]], [[Robotics]]"
  },
  "backlinks": [],
  "wiki_links": [
    "TrackingSystem",
    "ImmersiveExperience",
    "ComputerVision",
    "RenderingEngine",
    "SpatialComputing",
    "Robotics",
    "HumanComputerInteraction",
    "MetaverseDomain",
    "DisplayTechnology",
    "Presence"
  ],
  "ontology": {
    "term_id": "mv-797780543048",
    "preferred_term": "Configure a graph for code execution",
    "definition": "A component of the metaverse ecosystem focusing on configure a graph for code execution.",
    "source_domain": "metaverse",
    "maturity_level": null,
    "authority_score": 0.85
  }
}